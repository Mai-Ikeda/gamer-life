<div id="rate_<%= impression.id %>"></div>

<script>
  $(document).on('turbolinks:load', function() {
  let elem = document.querySelector('#rate_<%= impression.id %>');
  if (elem == null) return;
  
  elem.innerHTML = "";
  let opt = {  
    starOn: "<%= asset_path('star-on.png') %>",
    starOff: "<%= asset_path('star-off.png') %>",
    starHalf: "<%= asset_path('star-half.png') %>",
    score: "<%= impression.rate %>",
    readOnly: true,
  };
  raty(elem, opt);
});

</script>